#spring:
#  application:
#    name: gateway
#  config:
#    import: "optional:configserver:"
#  cloud:
#    config:
#      fail-fast: true
#      discovery:
#        enabled: true
#        service-id: config-server
#      retry:
#        initialInterval: 2000
#        multiplier: 1.5
#        maxInterval: 60000
#        maxAttempts: 100
#
#eureka:
#  client:
#    service-url:
#      enabled: true
#      fetch-registry: true
#      register-with-eureka: true
#      defaultZone: ${EUREKA_URI:http://localhost:8761/eureka/}
#  instance:
#    lease-renewal-interval-in-seconds: 10


server:
  port: 8080

spring:
  application:
    name: gateway
  cloud:
    config:
      enabled: false
    gateway:
      globalcors:
        corsConfigurations:
          "[/**]":
            allowedOrigins: "*"
            allowedHeaders:
              - content-type
              - Authorization
              - Access-Control-Request-Method
              - Access-Control-Request-Headers
            allowedMethods:
              - GET
              - POST
              - DELETE
              - PUT

      routes:
          # Backoffice
        - id: customisation
          uri: lb://CUSTOMISATION
          predicates:
            - Path=/customisation/api/**
        - id: payment
          uri: lb://PAYMENT
          predicates:
            - Path=/payment/api/**
        - id: subscription
          uri: lb://SUBSCRIPTION
          predicates:
            - Path=/subscription/api/**
        - id: ticket
          uri: lb://TICKET
          predicates:
            - Path=/ticket/api/**

          #Core
        - id: customer
          uri: lb://CUSTOMER
          predicates:
            - Path=/customer/api/v1/**
        - id: notification
          uri: lb://NOTIFICATION
          predicates:
            - Path=/notification/api/**
        - id: order
          uri: lb://ORDER
          predicates:
            - Path=/order/api/**
        - id: product
          uri: lb://PRODUCT
          predicates:
            - Path=/product/api/**
#          filters:
#            - AuthorizationFilter
        - id: store
          uri: lb://STORE
          predicates:
            - Path=/store/api/**

          #Config
        - id: authentication
          uri: lb://AUTHENTICATION
          predicates:
            - Path=/auth/api/**